{% extends 'base.html' %}
{% block content %}

<h2>ğŸ› ï¸ ê´€ë¦¬ì í˜ì´ì§€</h2>

<!-- ==== User Management Section ==== -->
<section>
  <h3>ğŸ‘¤ ì‚¬ìš©ì ê´€ë¦¬</h3>
  <a href="{{ url_for('admin.add_user') }}"><button>+ ì‚¬ìš©ì ì¶”ê°€</button></a>
  <table>
    <thead>
      <tr>
        <th>ì´ë¦„</th>
        <th>ì‚¬ë²ˆ</th>
        <th>ì§ì±…</th>
        <th>ì´ë©”ì¼</th>
        <th>ê¶Œí•œ</th>
        <th>ì‘ì—…</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <td>{{ user.name }}</td>
        <td>{{ user.employee_id }}</td>
        <td>{{ user.position }}</td>
        <td>{{ user.email }}</td>
        <td>{{ 'ê´€ë¦¬ì' if user.is_manager else 'ì¼ë°˜ ì‚¬ìš©ì' }}</td>
        <td>
          <a href="{{ url_for('admin.edit_user', user_id=user.id) }}">ìˆ˜ì •</a> |
          <a href="{{ url_for('admin.delete_user', user_id=user.id) }}" onclick="return confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>

<hr>

<!-- ==== Project Management Section ==== -->
<section style="margin-top: 2rem;">
  <h3>ğŸ“ í”„ë¡œì íŠ¸ ê´€ë¦¬</h3>
  <table>
    <thead>
      <tr>
        <th>í”„ë¡œì íŠ¸ëª…</th>
        <th>ì†”ë£¨ì…˜</th>
        <th>ë‹´ë‹¹ì</th>
        <th>ì‘ì—…</th>
      </tr>
    </thead>
    <tbody>
      {% for project in projects %}
      <tr>
        <td>{{ project.project_name }}</td>
        <td>{{ project.solution_name }}</td>
        <td>
          {% for u in project.assignees %}{{ u.name }}{% if not loop.last %}, {% endif %}{% endfor %}
        </td>
        <td>
          <a href="{{ url_for('admin.edit_project', project_id=project.id) }}">ìˆ˜ì •</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</section>

{% endblock %}
